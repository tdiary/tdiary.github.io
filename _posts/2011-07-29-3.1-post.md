---
leyout: post
title:  tDiary 3.1.0リリース
categories:
  - 3.1
  - release
---
tDiary 3.1.0をリリースします。

3.1.0は、3.1.x系列の最初のリリースです。3.1.0では、JavaScriptの利用率を大幅に高めました。

なお、従来マイナーバージョンが奇数の場合は開発版でしたが、3.x系より安定版と開発版の区別をやめ、すべてのリリースを安定版として扱うことにしました。今後、開発中のものは基本的に[GitHubのリポジトリ](http://github.com/tdiary)より入手して下さい。

### アップデートに関する注意点
#### JavaScriptファイルの追加
jsディレクトリが追加され、JavaScriptのファイル(*.js)が複数含まれるようになりました。themeと同様、tdiary.confと同じ場所にjsディレクトリが存在する必要があります(そうでない状況で運用したい場合には[同一サーバで複数のtDiaryを運営する方法](20021205.html)を参照して下さい)。

#### 標準テーマの変更
標準テーマ(default)のデザインが変更になっています。旧標準テーマは「tdiary2」という名称になっていますので、旧標準テーマを継続して使いたい場合にはtdiary2を使って下さい。

#### tdiary.rbの分割
tdiary.rbファイルを分割して、tdiaryディレクトリ配下に移動しています。アップデートの際は、ファイルの不足に注意して下さい。同様に、vendorディレクトリの下にも複数のファイルが追加されています。

### tDiary本体(core)の変更点
#### 機能追加
* 標準テーマ(default)のデザインを変更、旧標準テーマは「tdiary2」に
* js_urlプラグインの追加
* <body>タグのすぐ内側にdiv.whole-content要素を追加(新標準テーマで利用)

#### 機能変更
* 設定画面でページ遷移をなくした
* amazon、image、highlight、categoryプラグイン: 一部機能をJavaScriptに移行
* categoryプラグイン: ドロップダウンによる選択をサポート

#### バグ修正
* 05refererプラグイン: 設定で保存すると改行がなくなるバグを修正
* listプラグイン: ruby 1.9で動作するように修正
* amazonプラグイン: isbn_detailの不正なHTMLを修正し、divをspanに変更
* pre_wrapプラグイン: 不正なセレクタ指定を修正
* disp_referrerプラグイン: 文字コード変換にともなうエラーを修正

### theme の変更点
* gustav: ブラウザ依存のセレクタを廃止

### Blogkitの変更点
#### 機能追加
* プラグインにblogkit?メソッドを追加

#### バグ修正
* Blogスタイルをruby 1.9.2に対応

