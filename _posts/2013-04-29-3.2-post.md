---
leyout: post
title: tDiary-3.2.2 リリース
date: 2013-04-29 08:02:35 +0900
categories:
  - 3.2
---
tDiary-3.2.2 をリリースします。Ruby1.8系をサポートする最後のリリースです。

#### 【重要】Ruby1.8系サポート終了のお知らせ

すでに周知されているとおり、Ruby1.8は2013年6月をもって完全にサポート終了となります（バグフィックスは2012年6月にてすでに終了しており、現在はセキュリティフィックスのみ）。tDiaryにおいても、今回のリリースがRuby1.8をサポートする最後のバージョンとなります。2013年7月にリリースを予定している次バージョンではRuby1.8はサポート対象外となりますので、現在tDiaryをRuby1.8上で動かしている方は、新しいバージョン (Ruby 2.0) への移行をお願いします。

なお、サポート対象外となるRubyを使用している場合は、設定画面にて警告メッセージが表示されます。

* 参考: [1.8.7の今後につきまして](http://www.ruby-lang.org/ja/news/2011/10/07/plans-for-1-8-7/)

### tDiary-3.2.1 からの変更点

#### 本体(tdiary-core)の変更点

##### 機能追加

* ページ遷移なしでツッコミできるようになりました。設定画面にてcomment-ajaxプラグインを有効にすれば使えます。
* Rack環境でもフィード (makerssプラグイン) が使えるようになりました。Rack環境ではpublicディレクトリにrssファイルを生成します。
* キャッシュ機能を強化しました。
** 従来のキャッシュ先 (ファイル, memcached) に加えて、redisをキャッシュ先に指定できるようになりました。
** 複数人日記で運用しているサイトでも、memcached, redisキャッシュを使えるようになりました。

##### 機能変更

* 「スパムちゃんぷるー」が2013年5月にサービスを終了するため、SPAMフィルターでのブラックリスト取得元を[SpamLookup](http://bsb.spamlookup.net/)に変更しました。
** 参考: [スパムちゃんぷるー サービス終了のお知らせ](http://blog.livedoor.jp/edge_labs/archives/1791613.html)

##### セキュリティ対策

* クリックジャッキング対策を実装しました。設定画面や日記編集画面では、レスポンスヘッダにX-FRAME-OPTIONSを付与するようになりました。
** 参考: [IPA テクニカルウォッチ, 知らぬ間にプライバシー情報の非公開設定を公開設定に変更されてしまうなどの『クリックジャッキング』に関するレポート](http://www.ipa.go.jp/about/technicalwatch/20130326.html)

##### バグ修正

* GFMスタイルにて箇条書き内の文字がオートリンクされない問題を修正しました

##### 開発者向け変更点など

* Rake::Reloaderミドルウェアは開発環境のみで有効となりました。
* TDiary::ConfigクラスがCGIクラスに依存しないようになりました。
* 同梱しているライブラリをアップグレードしました
** json_pure: 1.7.6 から 1.7.7 (セキュリティfix)

